{%- assign length_minus_one = include.from_array | size | minus: 1 -%}

{%- assign with_offset = include.with_offset -%}

{%- comment -%} with_offset {%- endcomment -%}
{%- include as_self_or_null_the_variable_initialized_from_variable.liquid from_variable=with_offset -%}
{%- assign with_offset = return -%}
{%- assign return = null -%}
{%- comment -%} `Liquid` does not have functions {%- endcomment -%}

{%- if with_offset -%}
{% comment %} 0 being truthly makes sense {% endcomment %}

	{% comment %} the offset if outsite of the array {% endcomment %}
	{%- if offset > length_minus_one -%}

		{% comment %} do nothing {% endcomment %}

	{%- else -%}

		{%- assign return = (with_offset..length_minus_one) -%}

	{%- endif -%}
	
{%- else -%}

	{%- assign return = (0..length_minus_one) -%}

{%- endif -%}

{%- comment -%}resetting {%- endcomment -%}
{%- assign length_minus_one = null -%}
