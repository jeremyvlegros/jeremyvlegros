{%- comment -%} as_html_the_post_index_list_from_posts.liquid {%- endcomment -%}
{%- comment -%} Initialization {%- endcomment -%}
{%- assign _posts = include.posts -%}

{%- comment -%} generating the post list {%- endcomment -%}
{%- capture _post_list -%}
    
    {%- for post in _posts -%}

        {%- comment -%} date of creation {%- endcomment -%}
        {%- assign _date_of_creation = post.date_of_creation -%}

        {%- comment -%} dealing with empty string {%- endcomment -%}
        {%- if _date_of_creation == "" -%}
            {%- assign _date_of_creation = null -%}
        {%- endif -%}

        {%- comment -%} only if there is a date of creation {%- endcomment -%}
        {%- if _date_of_creation -%}

            {%- comment -%} background color {%- endcomment -%}
            {%- capture _background_color -%}
                {%- include as_color_background_from_date.liquid date=_date_of_creation -%}
            {%- endcapture -%}

            {%- comment -%} post id {%- endcomment -%}
            {%- capture _post_id -%}
                {%- include as_id_from_date.liquid date=_date_of_creation -%}
            {%- endcapture -%}

            {%- comment -%}  main value {%- endcomment -%}
            <li>
                <a class="{{ _background_color }}" href="#{{ _post_id }}"> {{ post.title | escape }}</a>
            </li>

        {%- endif -%}
    {%- endfor -%}
    
{%- endcapture -%}

{%- comment -%} return {%- endcomment -%}
{%- assign _return = _post_list | upcase -%}
{%- case _return -%}
    {%- when "" or "NULL" -%}
        {{ 'null' }}
    {%- else -%}
        {{ _post_list }}
{%- endcase -%}
{%- assign _return = null -%}


{%- assign _date_of_creation = null -%}
{%- assign _post_id = null -%}
{%- assign _background_color = null -%}
{%- assign _post_list = null -%}
{%- assign _posts = null -%}
