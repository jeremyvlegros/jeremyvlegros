{%- comment -%} as_canonical_url_from_url.liquid {%- endcomment -%}

{%- capture _site_name -%}
    {%- include initialize_from.liquid from=site.name -%}
{%- endcapture -%}

{%- capture _page_url -%}
    {%- include initialize_from.liquid from=include.from_url -%}
{%- endcapture -%}

{%- capture _site_url -%}
    {%- include initialize_from.liquid from=site.url -%}
{%- endcapture -%}

{%- comment -%} main value {%- endcomment -%}
{%- capture _the_canonical_url -%}
    {%- include initialize_from.liquid from="null" -%}
{%- endcapture -%}

{%- if _site_name != "null" and _site_url != "null" and _page_url != "null" -%}
    {%- assign _the_canonical_url = _site_url | append :"/" | append : _site_name | append : _page_url -%}
{%- endif -%}

{%- comment -%} return {%- endcomment -%}
{%- capture _return -%}
    {%- include return_from.liquid from=_the_canonical_url -%}
{%- endcapture -%}
{{ _return }}

{%- comment -%} resetting {%- endcomment -%}
{%- assign _return = null -%}
{%- assign _the_canonical_url = null -%}
{%- assign _site_name = null -%}
{%- assign _page_url = null -%}

{%- comment -%} {%- endcomment -%}