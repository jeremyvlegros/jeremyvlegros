{%- assign _date = include.custom_date -%}
{%-comment-%} Dealing with empty string {%-endcomment-%}

{%- if _date == "" -%}
    {%- assign _date = null -%}
{%- endif -%}

{%-comment-%} There is date {%-endcomment-%}
{%- if _date -%}

    {%-comment-%}
    date without "#date " and " GMT"
        input  : "#date 2023-06-28 05:16 1687914994970097614 GMT"
        output : "2023-06-28 05:16 1687914994970097614"
    {%-endcomment-%}
    {%- assign _date = _date | replace: "#date ", "" | replace: " GMT", "" %}

    {%-comment-%}
    date as array
         input  : "2023-06-28 05:16 1687914994970097614"
         output : ["2023-06-28", "05:16", "1687914994970097614"]
    {%-endcomment-%}
    {%- assign _date = _date | split: " " %}

    {%-comment-%}
    id
         input  : ["2023-06-28", "05:16", "1687914994970097614"]
         output : "1687914994970097614"
    {%-endcomment-%}
    {%- assign _id = _date[2] -%}

    {%-comment-%}
    time
         input  : ["2023-06-28", "05:16", "1687914994970097614"]
         output :  05:16
    {%-endcomment-%}
    {%- assign _time = _date[1] -%}

    {%-comment-%}
    time UTC
          input  :  "05:16"
          output :  "T05:16:00+00:00"
    {%-endcomment-%}
    {%- assign _time = "T" | append: _time | append: ":00+00:00" -%}

    {%-comment-%}
    date as string
          input  :  ["2023-06-28", "05:16", "1687914994970097614"]
          output :  "2023-06-28"
    {%-endcomment-%}
    {%- assign _date = date[0]-%}
    
    {%-comment-%}
    Final value
           input  : "2023-06-28", _time, _id
           output : "2023-06-28T05:16:00+00:00,1687914994970097614"
    {%-endcomment-%}
    {%- assign _date = _date | append: _time | append: "," | append: _id -%}

    {% comment %} return {% endcomment %}
    <!-- version #date 2023-07-09 13:13 1688894026323152323 GMT -->
    {{ _date }}

    {% comment %} resetting the variables {% endcomment %}
    {%- assign _date = null -%}
    {%- assign _time = null -%}
    {%- assign _id = null -%}

{%- endif -%}
